{
  "entities": {
    "UserProfile": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "UserProfile",
      "type": "object",
      "description": "Represents a user's profile information for the portfolio website.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the UserProfile entity."
        },
        "fullName": {
          "type": "string",
          "description": "The user's full name."
        },
        "title": {
          "type": "string",
          "description": "The user's professional title (e.g., 'Software Engineer', 'Graphic Designer')."
        },
        "bio": {
          "type": "string",
          "description": "A short biography or description of the user."
        },
        "email": {
          "type": "string",
          "description": "The user's email address.",
          "format": "email"
        },
        "websiteUrl": {
          "type": "string",
          "description": "The URL of the user's personal website or portfolio.",
          "format": "uri"
        },
        "linkedinUrl": {
          "type": "string",
          "description": "The URL of the user's LinkedIn profile.",
          "format": "uri"
        },
        "githubUrl": {
          "type": "string",
          "description": "The URL of the user's GitHub profile.",
          "format": "uri"
        }
      },
      "required": [
        "id",
        "fullName",
        "title",
        "bio",
        "email"
      ]
    },
    "Project": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Project",
      "type": "object",
      "description": "Represents a project showcased on the portfolio website.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the Project entity."
        },
        "userProfileId": {
          "type": "string",
          "description": "Reference to UserProfile. (Relationship: UserProfile 1:N Project)"
        },
        "title": {
          "type": "string",
          "description": "The title of the project."
        },
        "description": {
          "type": "string",
          "description": "A detailed description of the project."
        },
        "imageUrl": {
          "type": "string",
          "description": "URL of the project's image.",
          "format": "uri"
        },
        "projectUrl": {
          "type": "string",
          "description": "URL of the live project or its repository.",
          "format": "uri"
        },
        "technologies": {
          "type": "array",
          "description": "List of technologies used in the project",
          "items": {
            "type": "string"
          }
        }
      },
      "required": [
        "id",
        "userProfileId",
        "title",
        "description",
        "imageUrl"
      ]
    },
    "ContactFormSubmission": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "ContactFormSubmission",
      "type": "object",
      "description": "Represents a submission from the contact form on the website.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the ContactFormSubmission entity."
        },
        "name": {
          "type": "string",
          "description": "The name of the person submitting the form."
        },
        "email": {
          "type": "string",
          "description": "The email address of the person submitting the form.",
          "format": "email"
        },
        "message": {
          "type": "string",
          "description": "The message submitted through the contact form."
        },
        "submissionDate": {
          "type": "string",
          "description": "The date and time when the form was submitted.",
          "format": "date-time"
        }
      },
      "required": [
        "id",
        "name",
        "email",
        "message",
        "submissionDate"
      ]
    }
  },
  "auth": {
    "providers": [
      "password",
      "anonymous"
    ]
  },
  "firestore": {
    "structure": [
      {
        "path": "/users/{userId}/profile",
        "definition": {
          "entityName": "UserProfile",
          "schema": {
            "$ref": "#/backend/entities/UserProfile"
          },
          "description": "Stores user profile data. Path-based ownership ensures only the user can access their profile.",
          "params": [
            {
              "name": "userId",
              "description": "The unique identifier of the user."
            }
          ]
        }
      },
      {
        "path": "/users/{userId}/projects/{projectId}",
        "definition": {
          "entityName": "Project",
          "schema": {
            "$ref": "#/backend/entities/Project"
          },
          "description": "Stores project data associated with a user. Path-based ownership ensures only the user can access their projects.",
          "params": [
            {
              "name": "userId",
              "description": "The unique identifier of the user."
            },
            {
              "name": "projectId",
              "description": "The unique identifier of the project."
            }
          ]
        }
      },
      {
        "path": "/contact_form_submissions/{submissionId}",
        "definition": {
          "entityName": "ContactFormSubmission",
          "schema": {
            "$ref": "#/backend/entities/ContactFormSubmission"
          },
          "description": "Stores contact form submissions. Access control is managed at the collection level via DBAC roles, and restricted in backend.",
          "params": [
            {
              "name": "submissionId",
              "description": "The unique identifier of the contact form submission."
            }
          ]
        }
      }
    ],
    "reasoning": "This Firestore data structure is designed for the AzurePrint portfolio website, emphasizing security, scalability, and ease of debugging. It follows the principles of Authorization Independence, Structural Segregation, and Access Modeling.\n\n**Authorization Independence:**\n\n*   UserProfile and Project data are structured to eliminate the need for `get()` calls in security rules. Projects are nested under UserProfile, making ownership clear via path-based rules.\n*   ContactFormSubmissions, while not directly user-owned, are segregated into a dedicated collection, simplifying access control.\n\n**Structural Segregation:**\n\n*   UserProfiles and Projects are separated into collections based on ownership, which simplifies rules and avoid mixing data with different access needs.\n*   The ContactFormSubmissions are stored in its collection because they are not user owned data.\n\n**Access Modeling:**\n\n*   **Private Data:** UserProfile data is stored using path-based ownership `/users/{userId}/profile`, ensuring that only the authenticated user can access their profile.\n*   **User-Owned Data:** Projects are nested under UserProfile using hierarchical paths (`/users/{userId}/projects/{projectId}`), clearly representing the 1:N relationship. This simplifies ownership-based security rules.\n*   **ContactFormSubmissions:** Stored in `/contact_form_submissions/{submissionId}`. Access control is managed at the collection level, potentially restricted to admin roles (determined by the application's backend logic). The rules would determine who can read and write submissions.\n\n**QAPs Support:**\n\n*   The structure supports secure `list` operations for UserProfiles and Projects because of the path based ownership which allows to apply security rules.\n*   Since the contact form submissions are not user owned, the `list` is controlled by backend code and DBAC role."
  }
}